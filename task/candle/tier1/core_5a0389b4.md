# `packages/candle/src/core/tokenizer/core.rs`

- **Path**: /Volumes/samsung_t9/paraphym
- **Project**: candle
- **File Hash**: 5a0389b4  
- **Timestamp**: 2025-10-10T02:15:58.148930+00:00  
- **Lines of Code**: 346

---## ⚠️ PRIORITY: Decompose into Submodules

**File**: ``  
**Lines of Code**: 346 (threshold: 300)

This file MUST be decomposed before addressing any other violations.

- Decompose the code into logical separation of concerns with no single module >= 300 lines of code. 
- Ensure all the sum of parts exactly equals the original with ONLY production quality source code
- Ensure the original "shadowing" module is deleted so the new decomposed submodule is ACTUALLY USED
- Ensure there are absolutely no backup files left in the codebase polluting up the code with the original monolithic file.

---## Tier 1 Infractions 


- Line 476
  - would require
  - 

```rust
        let _sequences = [vec![1, 2, 3], vec![1, 2, 3, 4, 5], vec![1]];

        // This test would require a real tokenizer instance
        // let tokenizer = create_test_tokenizer();
        // tokenizer.pad_sequences(&mut sequences);
```

- is this actually a non-production indicator or a false positive? If false positive, remove it from the task file.
- If IT IS a non-production fake, fabrication, incomplete, dangeours or lacking implementation: add detailed notes explaining the issue and plan out the necessary replacement work in sequential steps. 
- Update this section of the task file with the notes and plan.

## Tests in Source Directory


### Line 461: `#[cfg]`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 461)
- **Issue**: Tests must be in `./tests` directory, not in `./src`

```rust

#[cfg(test)]
mod tests {
    use super::*;

```

### Action Required

- Extract tests into `./tests` directory
  - `tests/` should mirror the file structure of the `src/` with file names prepended with `test_`
  - Update this section with specific remediation instructions
  


### Line 465: `#[test]`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 465)
- **Issue**: Tests must be in `./tests` directory, not in `./src`

```rust

    #[test]
    fn test_tokenizer_config_default() {
        let config = CandleTokenizerConfig::default();
        assert_eq!(config.max_length, 4096);
```

### Action Required

- Extract tests into `./tests` directory
  - `tests/` should mirror the file structure of the `src/` with file names prepended with `test_`
  - Update this section with specific remediation instructions
  


### Line 473: `#[test]`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 473)
- **Issue**: Tests must be in `./tests` directory, not in `./src`

```rust

    #[test]
    fn test_padding_strategy() {
        let _sequences = [vec![1, 2, 3], vec![1, 2, 3, 4, 5], vec![1]];

```

### Action Required

- Extract tests into `./tests` directory
  - `tests/` should mirror the file structure of the `src/` with file names prepended with `test_`
  - Update this section with specific remediation instructions
  


### Line 484: `#[test]`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 484)
- **Issue**: Tests must be in `./tests` directory, not in `./src`

```rust

    #[test]
    fn test_token_overlap_calculation() {
        let seq1 = vec![1, 2, 3, 4, 5];
        let seq2 = vec![4, 5, 6, 7, 8];
```

### Action Required

- Extract tests into `./tests` directory
  - `tests/` should mirror the file structure of the `src/` with file names prepended with `test_`
  - Update this section with specific remediation instructions
  


### Line 496: `#[test]`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 496)
- **Issue**: Tests must be in `./tests` directory, not in `./src`

```rust

    #[test]
    fn test_token_count_estimation() {
        let text = "Hello world this is a test";
        let estimated = utils::estimate_token_count(text);
```

### Action Required

- Extract tests into `./tests` directory
  - `tests/` should mirror the file structure of the `src/` with file names prepended with `test_`
  - Update this section with specific remediation instructions
  


### Line 504: `#[test]`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 504)
- **Issue**: Tests must be in `./tests` directory, not in `./src`

```rust

    #[test]
    fn test_text_splitting() {
        let text = "Hello world this is a very long sentence that needs to be split";
        let (part1, part2) = utils::split_at_token_boundary(text, 20);
```

### Action Required

- Extract tests into `./tests` directory
  - `tests/` should mirror the file structure of the `src/` with file names prepended with `test_`
  - Update this section with specific remediation instructions
  

## Orphaned Methods


### `remove_special_tokens()`

- **Location**: `/Volumes/samsung_t9/paraphym/packages/candle/src/core/tokenizer/core.rs` (line 418)
- **Visibility**: pub
- **Issue**: Function is defined but never called anywhere in the codebase

```rust

    /// Remove special tokens from sequence
    pub fn remove_special_tokens(tokenizer: &CandleTokenizer, tokens: &[u32]) -> Vec<u32> {
        tokens
            .iter()
```

### Action Required:

- Evaluate the intended purpose of the orphaned method, assuming it is intended to be used by default.
- If it should be used, update this section with instructions on how to incorporate it into the codebase.
- If it is deprecated, ask for permission to remove it.
- Update this section with your findings and instructions on how to proceed.

---

*Generated by kargo-turd 0.1.0*

/Volumes/samsung_t9/paraphym