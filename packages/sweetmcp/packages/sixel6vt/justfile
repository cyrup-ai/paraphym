# sixel6vt - Terminal with sixel graphics support

# Default recipe - show help
default:
    @just --list

# Initial setup - clone Rio and convert to library
setup:
    @echo "ğŸš€ Running initial setup..."
    cargo run -p xtask -- setup

# Clean vendor directory
clean:
    @echo "ğŸ§¹ Cleaning vendor directory..."
    cargo run -p xtask -- clean

# Build the project
build: 
    @echo "ğŸ”¨ Building sixel6vt..."
    cargo build -p sixel6vt

# Build release version
release:
    @echo "ğŸ”¨ Building sixel6vt (release)..."
    cargo build -p sixel6vt --release

# Run the application  
run:
    @echo "ğŸš€ Running sixel6vt..."
    @if [ ! -d "vendor/rio" ]; then \
        echo "âŒ vendor/rio not found. Running setup first..."; \
        cargo run -C xtask -- setup; \
    fi
    cargo run -p sixel6vt

# Full workflow - setup and build
init: setup build
    @echo "âœ… Initialization complete!"

# Check if vendor/rio exists
check-vendor:
    @if [ ! -d "vendor/rio" ]; then \
        echo "âŒ vendor/rio not found. Run 'just setup' first."; \
        exit 1; \
    else \
        echo "âœ… vendor/rio exists"; \
    fi

# Run tests
test:
    cargo test -p sixel6vt

# Format code
fmt:
    cargo fmt --all

# Check code
check:
    cargo check -p sixel6vt

# Full clean including cargo artifacts
clean-all: clean
    cargo clean
